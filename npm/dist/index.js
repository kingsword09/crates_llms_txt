import{getLlmsConfigByRustdocAllFeatures as e,getLlmsConfigByRustdocFeatures as t,getLlmsConfigOnline as n}from"crates-llms-txt-napi";const r=e=>{let t=new Map;for(let n of e)t.set(n.link,{...n});return Array.from(t.values()).map(e=>({...e,title:i(e.link)}))},i=e=>{let t=e.split(`/`).filter(e=>e!==``),n=t.pop()||e,r=n.lastIndexOf(`.`);return r>0?n.substring(0,r):n},a=e=>{let t=new Map;for(let n of e){let e=t.get(n.link);t.set(n.link,e?`${e}\n\n${n.content}`:n.content)}return Array.from(t.entries()).map(([e,t])=>({link:e,content:t}))},o=e=>{if(!e)return null;let t=JSON.parse(e.sessions),n=r(t),i=JSON.parse(e.fullSessions),o=a(i);try{return{libName:e.libName,version:e.version,sessions:n,fullSessions:o}}catch{return null}},s=async(e,t)=>{let r=await n(e,t);return o(r)},c=(t,n)=>{let r=e(t,n);return console.log(`QAQ`,r),o(r)},l=(e,n,r,i)=>{let a=t(e,n,r,i);return o(a)};export{c as getLlmsConfigByRustdocAllFeatures,l as getLlmsConfigByRustdocFeatures,s as getLlmsConfigOnline};